- content_for :title, @plant.name
- content_for :header_content do
  = link_to garden_plants_path(@plant.garden.id), class: 'icon ui-btn-left', data: { direction: 'reverse' } do
    i.icon-arrow-left
  h1 = content_for(:title)

- if not @plant.logs.empty?
  javascript:
    $(document).bind("pageshow", function() {
        var chart;
        /*var logs = JSON.parse('#{@plant.logs.limit(360).to_json.html_safe}');
        var moisture = [];
        var sunlight = [];
        logs.forEach(function(log) {
            var created_at = log.created_at;
            moisture.push({"created_at": created_at, "moisture": log.moisture});
            sunlight.push({"created_at": created_at, "sunlight": log.sunlight});
        });*/
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'chart'
            },
            title: {
                text: 'Moisture and Light Over Time'
            },
            credits: {
                enabled: false
            },
            colors: ['#4aa2bb', '#d3b600', '#7ebe32'],
            xAxis: {
                type: 'datetime'
            },
            yAxis: {
                title: {
                    text: '% Exposure'
                },
            },
            tooltip: {
                enabled: false
            },
            series: [{
                name: 'Moisture',
                data: #{@moisture_points}
            },
            {
                name: 'Sunlight',
                data: #{@sunlight_points}
            }]
        });
    });
  p
    strong
      | Last Update: 
    span
      | #{time_ago_in_words(@plant.updated_at)} ago
  p
    strong
      | Moisture: 
    span = number_to_percentage(@plant.logs.last.moisture/10, :precision => 0)
  p
    strong
      | Light: 
    span = number_to_percentage(@plant.logs.last.sunlight/10, :precision => 0)
  #chart style="height: 300px; width: 100%; margin: 0 auto;"
- else
  ul data-role="listview" data-inset="true"
    li
      |  Nothing's been logged yet!